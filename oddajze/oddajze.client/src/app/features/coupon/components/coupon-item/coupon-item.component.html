<div class="coupon-card" [class.expanded]="expand()">
    <div class="coupon-header" (click)="toggleExpand()" role="button" tabindex="0" [attr.aria-expanded]="expand()">
        <img class="logo" [src]="url + coupon()?.imageUrl" alt="Logo firmy" />

        <div class="coupon-description">
            <h3>{{ coupon()?.title }}</h3>
        </div>

        <div class="points">
            <span class="value">{{ coupon()?.pointsRequired }} pkt</span>
        </div>
    </div>

    <hr />

    <div class="coupon-details" *ngIf="expand()">
        <p class="description">{{ coupon()?.description }}</p>

        <button class="use-btn" (click)="useCoupon()" [disabled]="isLoading() || !coupon()?.available"
            [attr.aria-busy]="isLoading()">
            {{ isLoading() ? 'Proszę czekać...' : (coupon()?.available ? 'Kup kupon' : 'Niedostępny') }}
        </button>

        <p class="feedback" *ngIf="feedbackMessage()">{{ feedbackMessage() }}</p>
    </div>
</div>
  